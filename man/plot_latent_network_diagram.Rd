\name{plot_latent_network_diagram}
\alias{plot_latent_network_diagram}
\title{Plot Latent Variables as a Network Diagram}
\description{
The \code{plot_latent_network_diagram} function generates and saves a network‑style path diagram of latent variables extracted from a structural equation model (SEM) object (from \pkg{lavaan} or \pkg{psychonetrics}). Manifest indicators can be shown or hidden, and color, layout, size, and device parameters are fully customizable.
}
\usage{
plot_latent_network_diagram(
model_object,
filename,
output_path = ".",
width = 9.5,
height = 6.5,
resolution = 1500,
node_labels = NULL,
color_scheme = NULL,
color_palette = "auto",
plot_settings = NULL,
device_settings = NULL,
edge_settings = NULL,
save_message = TRUE,
show_manifest = TRUE
)
}
\arguments{
\item{\code{model_object}}{An SEM fit object, either a \code{lavaan} object or a \code{psychonetrics} object.}
\item{\code{filename}}{Character. Name of the file (with extension: “.png”, “.jpg”, or “.pdf”) to which the diagram will be written.}
\item{\code{output_path}}{Character. Directory in which to save the file. Defaults to the current working directory (".").}
\item{\code{width}}{Numeric. Width of the graphics device in inches. Default is 9.5.}
\item{\code{height}}{Numeric. Height of the graphics device in inches. Default is 6.5.}
\item{\code{resolution}}{Integer. Resolution (dots per inch) for raster formats (“png”, “jpg”). Default is 1500.}
\item{\code{node_labels}}{Optional character vector of node labels. If \code{NULL}, default labels “Item1…Itemm” and “Factor1…Factorn” are generated.}
\item{\code{color_scheme}}{Optional list with elements \code{man} and \code{lat} specifying colors for manifest and latent nodes. If \code{NULL}, colors are generated via \code{color_palette}.}
\item{\code{color_palette}}{Character. Predefined palette name (“auto”, “brewer_set1”, “viridis”, etc.) passed to the internal \code{generate_color_scheme} function. Default is “auto”.}
\item{\code{plot_settings}}{List of graphical settings passed to \code{\link[semPlot]{semPaths}} (e.g. \code{layout}, \code{curve}, \code{sizeLat}). Defaults are provided.}
\item{\code{device_settings}}{List with device parameters \code{width}, \code{height}, \code{units}, and \code{res} for the graphics device. Overrides \code{width}, \code{height}, \code{resolution} if non-\code{NULL}.}
\item{\code{edge_settings}}{List with edge label settings \code{edge.label.cex} and \code{edge.label.color}. Defaults are 0.8 and “black”.}
\item{\code{save_message}}{Logical. If \code{TRUE}, prints a message to the console indicating where the plot was saved.}
\item{\code{show_manifest}}{Logical. If \code{TRUE}, displays both manifest and latent variables; if \code{FALSE}, hides manifest nodes and only shows latent variables.}
}
\details{
\enumerate{
\item The function extracts standardized factor loadings (\code{lambda}), latent covariance (\code{psi}), and residual variances (\code{theta}) from \code{model_object}.
\item A LISREL‑style model is created via \code{\link[semPlot]{lisrelModel}}.
\item File path is constructed from \code{output_path} and \code{filename}.
\item Default device, plot, and edge settings are defined; user‑supplied lists are merged via \code{\link[base]{modifyList}}.
\item Node labels and colors are autogenerated if not provided, using palettes from \pkg{RColorBrewer}, \pkg{viridis}, or base R.
\item The graphics device is opened according to the file extension; unsupported formats raise an error.
\item \code{\link[semPlot]{semPaths}} is called with appropriate arguments. If \code{show_manifest = FALSE}, manifest nodes are hidden by setting sizes to zero and labels to blank.
\item The device is closed, and an optional console message confirms the output filepath.
}
}
\value{
(invisible) \code{NULL}.
Side effect: writes the network diagram to \code{file.path(output_path, filename)}.
}
\examples{
plot_latent_network_diagram(
  model_object = lnm,
  filename = "Figura 3.jpg",
  output_path = "Figuras",
  width = 9.5,
  height = 6.5,
  resolution = 1500,
  node_labels = c("Dei", "Emo", "Sex", "Dsi", "Sat"),
  color_palette = "brewer_set2",
  plot_settings = list(
    sizeLat = 15,              # Círculos más grandes (default: 12)
    sizeMan = 0,               # Mantener manifiestas ocultas
    nodeLabels.cex = 1.5,      # Texto de los nodos más grande
    borders = TRUE,            # Mostrar bordes de círculos
    lwd = 3                    # Grosor del borde de círculos
  ),
  edge_settings = list(
    edge.label.cex = 1.2,      # Valores de correlaciones más grandes (default: 0.8)
    edge.width = 2,            # Flechas más gruesas
    edge.label.color = "grey32"
  ),
  show_manifest = FALSE,
  save_message = TRUE
)
}
\author{
Dr. José Ventura-León
}
