\name{plot_latent_network_diagram}
\alias{plot_latent_network_diagram}
\title{Plot Latent Variables as a Network Diagram}
\description{
The \code{plot_latent_network_diagram} function generates and saves a network‑style path diagram of latent variables extracted from a structural equation model (SEM) object (from \pkg{lavaan} or \pkg{psychonetrics}). Manifest indicators can be shown or hidden, and color, layout, and device parameters are fully customizable.
}
\usage{
plot_latent_network_diagram(model_object,
                            output_file,
                            node_labels = NULL,
                            color_scheme = NULL,
                            color_palette = "auto",
                            plot_settings = NULL,
                            device_settings = NULL,
                            edge_settings = NULL,
                            save_message = TRUE,
                            show_manifest = TRUE)
}
\arguments{
\item{\code{model_object}}{An SEM fit object, either a \code{lavaan} object or a \code{psychonetrics} object.}
\item{\code{output_file}}{Character. Path (including filename and extension: “.png”, “.jpg”, or “.pdf”) where the diagram will be saved.}
\item{\code{node_labels}}{Optional character vector of node labels. If \code{NULL}, default labels “Item1…Itemm” and “Factor1…Factorn” are generated.}
\item{\code{color_scheme}}{Optional list with elements \code{man} and \code{lat} specifying colors for manifest and latent nodes. If \code{NULL}, colors are generated via \code{color_palette}.}
\item{\code{color_palette}}{Character. Predefined palette name (“auto”, “brewer_set1”, “viridis”, etc.) passed to the internal \code{generate_color_scheme} function. Default is “auto”.}
\item{\code{plot_settings}}{List of graphical settings passed to \code{\link[semPlot]{semPaths}} (e.g. \code{layout}, \code{curve}, \code{sizeLat}). Defaults are provided.}
\item{\code{device_settings}}{List with device parameters \code{width}, \code{height}, \code{units}, and \code{res} for the graphics device. Defaults are 9.5×6.5 inches at 1500 dpi.}
\item{\code{edge_settings}}{List with edge label settings \code{edge.label.cex} and \code{edge.label.color}. Defaults are 0.8 and “black”.}
\item{\code{save_message}}{Logical. If \code{TRUE}, prints a message to the console indicating where the plot was saved.}
\item{\code{show_manifest}}{Logical. If \code{TRUE}, displays both manifest and latent variables; if \code{FALSE}, hides manifest nodes and only shows latent variables.}
}
\details{
\enumerate{
\item The function inspects \code{model_object} to extract standardized factor loadings (\code{lambda}), latent covariance matrix (\code{psi}), and residual variances (\code{theta}).
\item A LISREL‑style model is created via \code{\link[semPlot]{lisrelModel}}.
\item Default device, plot, and edge settings are defined; user‑supplied lists are merged via \code{\link[base]{modifyList}}.
\item Node labels and colors are autogenerated if not provided, using a range of palettes including \pkg{RColorBrewer}, \pkg{viridis}, and base \code{rainbow}/\code{heat.colors}.
\item The graphics device is opened based on \code{output_file} extension; unsupported formats raise an error.
\item Finally, \code{\link[semPlot]{semPaths}} is called with appropriate arguments. If \code{show_manifest = FALSE}, manifest nodes are hidden by setting their size to zero and labels to blank.
\item The device is closed, and an optional console message confirms the filepath.
}
}
\value{
(invisible) \code{NULL}.
Side effect: writes the network diagram file to \code{output_file}.
}
\examples{
plot_latent_network_diagram(
model_object = lnm,
output_file = "Figuras/Figura3_full.jpg",
node_labels = c(
paste0("MII",1:4),
paste0("MII",5:9),
paste0("MII",10:12),
paste0("MII",13:16),
paste0("RAS",1:5),
"Des_Emo","Emo","Sex","Des_Sex","Satisfaction"
),
color_palette = "brewer_set1",
show_manifest = FALSE, # Only latent variables
save_message = TRUE
)
}
\author{
Dr. José Ventura-León
}
